/**
 * Nico Pr â€” https://nicopr.fr
 * RIPPLES3 PACKAGE RELEASE v0.3.5
 * 17/06/2025 02:41:12
 */
(function(){const l={"default":{D:"img.webp",ba:.997,N:.996,T:10,ta:.66,Ca:.619,Kb:[0,.286,1],Aa:.1,wa:.7,ua:.16,ka:1.2,la:2.6,ic:39,sa:1,qa:0,ra:.5,va:.583,Cb:[0,.502,1],ia:1.7,ca:.2,ja:.7,U:.017,R:.36,aa:.25,$:.3,ha:.15,fa:1.4,ga:.02,da:.42,ea:2.5,Db:[.624,.332,.707],xa:28,ya:65,za:1.2,qb:.18,ub:[.659,-.534,.53],ma:175,na:72,oa:.2,mb:.52,Da:.6,pa:.3,Ba:.15},clear:{D:"img.webp",ba:.998,N:.985,T:14,ta:.78,Ca:.39,Aa:0,wa:2.81,ua:.18,ka:1,la:1.57,sa:2.9,qa:0,ra:8,va:.62,ia:4.4,ca:.1,ja:1.58,U:.018,R:.36,aa:3.6,
$:3.65,ha:.3,fa:1.1,ga:.03,da:.6,ea:1.1,za:.5,xa:90,ya:48,oa:1.3,ma:215,na:27,Da:1.599,pa:2.43,Ba:4.15},thick:{D:"img.webp",ba:.984,N:.997,T:6,ta:.6,Ca:.583,Aa:.105,wa:.9,ua:.36,ka:.4,la:.22,sa:.55,qa:.12,ra:2.9,va:.583,ia:.3,ca:.24,ja:2.77,U:.027,R:.98,aa:3.05,$:3.65,ha:.18,fa:.6,ga:.08,da:.21,ea:.35,za:0,xa:60,ya:61,oa:.4,ma:250,na:63,Da:.375,pa:.18,Ba:.2},storm:{D:"img.webp",ba:.997,N:.992,T:14,ta:.72,Ca:.611,Aa:.33,wa:.13,ua:.42,ka:2.7,la:1.01,sa:2.1,qa:.25,ra:12.6,va:.583,ia:.3,ca:.06,ja:1.08,
U:.024,R:.68,aa:3.3,$:3.6,ha:0,fa:.5,ga:0,da:0,ea:0,za:0,xa:30,ya:60,oa:1.4,ma:233,na:44,Da:1.94,pa:1.09,Ba:.4},pool:{D:"pool.webp",ba:.997,N:.996,T:12,ta:.81,Ca:.619,Aa:.1,wa:2.04,ua:.16,ka:.45,la:.71,sa:1,qa:0,ra:.5,va:.583,ia:1.1,ca:.18,ja:.19,U:.02,R:.28,aa:1.1,$:.3,ha:.19,fa:1.1,ga:.06,da:.43,ea:.5,za:1.6,qb:.18,xa:90,ya:38,oa:1.9,mb:.52,ma:105,na:26,Da:.59,pa:5.07,Ba:3.1}};function p(a){a.i.s.Kb=r(a.j.Ca.g);a.i.s.Cb=r(a.j.va.g)}function u(a){a.i.s.Db=v(a.j.xa.g,a.j.ya.g);a.i.s.ub=v(a.j.ma.g,a.j.na.g);a.i.s.mc=r(a.j.qb.g);a.i.s.ec=r(a.j.mb.g)}function x(a,c,b=""){c=[c].flat();let d=document.createElement("div");d.classList.add(...c);b&&(d.innerHTML=b);a&&a.appendChild(d);return d}function y(a,c){var b=Object.keys(l);c=a.C+c;var d=b.length-1;a.C=0>c?d:c>d?0:c;b=b[a.C];a.M.innerText=b;b={...l["default"],...l[b]};a.i.load(b);z(a,b)}
function aa(a){const c=e=>Number(e.toFixed(3)),b={};Object.entries(a.j).forEach(([e,f])=>{b[e]=Array.isArray(f.g)?f.g.map(c):"number"===typeof f.g?Number(f.g.toFixed(3)):f.g});console.log(JSON.stringify(b));a=Object.entries(a.j).map(([e,f])=>f.o+"="+JSON.stringify(b[e]));a=location.origin+location.pathname+"#"+a.join("&");const d={title:document.title,url:a};navigator.share&&navigator.canShare(d)?navigator.share(d).then(()=>{}).catch(e=>{throw e;}):ba(a)}
function ca(a){const c=document.createElement("input");c.type="file";c.accept=[".jpg",".png",".webp"];c.style.display="none";c.addEventListener("change",b=>{const d=URL.createObjectURL(b.target.files[0]);c.remove();a.i.load({D:d}).then(()=>{URL.revokeObjectURL(d)})});c.addEventListener("cancel",()=>{c.remove()});c.click()}function A(a){a.pop=!a.pop;a.K.style.transform=a.pop?"translateX(0)":"tl".includes("l")?"translateX(-100%)":"translateX(100%)"}
function da(a){"tl".includes("t")?a.K.style.top="0":a.K.style.bottom="0";"tl".includes("l")?a.K.style.left="0":a.K.style.right="0";"tl".includes("t")?a.u.style.top="0":a.u.style.bottom="var(--spc)";"tl".includes("l")?a.u.style.left="100%":a.u.style.right="0";const c="tl".includes("l")?"translateX(-100%)":"translateX(100%)";a.K.style.transform=c}function ea(a,c){let b=x(a.P,["action",c.h.replaceAll(" ","-")],c.h);b.tabIndex=0;b.addEventListener("click",()=>{c.H();b.focus()})}
function fa(a,c){x(a.P,["toggle",c.h.replaceAll(" ","-"),...(c.lc?["toggle"]:[])],c.h).addEventListener("click",()=>c.H())}
function ha(a,c){let b=x(null,"prop");b.dataset.yb=c.key;c.sb=x(b,"vbar");b.addEventListener("pointerdown",e=>{let f=e.pointerId;if(!a.A.has(f)){var g=e.currentTarget,h=a.j[g.dataset.yb];a.A.set(f,h.h);a.G.set(f,h.g);a.J.set(f,e.pageX);g.classList.add("down");g.setPointerCapture(f);g.addEventListener("pointermove",a.O);g.addEventListener("pointerup",a.B);g.addEventListener("pointercancel",a.B)}});x(b,"valt",c.h);c.bb=x(b,"val",c.g);if(c.l){var d=c.l.toLowerCase().replaceAll(" ","-");(d=a.s.querySelector("."+
d))||(d=ia(a,c.l));d.querySelector(".cnt").appendChild(b)}else a.s.appendChild(b)}function B(a){const c=a.s.getBoundingClientRect();a.tb={x:Math.round(c.x),y:Math.round(c.y),w:Math.round(c.width),v:Math.round(c.height)}}function z(a,c){Object.values(a.j).forEach(b=>{b.g=c[b.key];b.bb.innerText=c[b.key];C(b)})}function C(a){a.sb.style.width=(a.g-a.min)/(a.max-a.min)*100+"%"}function ba(a){navigator.clipboard.writeText(a).then(()=>{}).catch(c=>{throw c;})}
function D(a){const c=window.location.hash.slice(1);if(!c.length)return{};try{const b={},d=Object.fromEntries(Object.entries(a.j).map(([e,f])=>[f.o,e]));c.split("&").map(e=>e.split("=")).forEach(([e,f])=>{"img"===e&&(b.D=f);if(e=d[e]){var g=a.j[e];f=JSON.parse(f);g.g=f;g.bb&&(g.bb.innerText=f.toFixed(String(g.m).split(".")[1]?.length||0));g.sb&&C(g);b[e]=f}});a.M.innerText="custom";return b}catch(b){return E(a.i,"bad url"),console.error(b),{}}}
function ja(a,c){Array.from(a.s.querySelectorAll(".group")).forEach(b=>b.classList.toggle("exp",b===c&&!b.classList.contains("exp")))}function ia(a,c){let b=x(a.s,["group",c.toLowerCase().replaceAll(" ","-")]);c=x(b,"grp",c);let d=x(b,"wrp");x(d,"cnt");c.addEventListener("click",()=>ja(a,b));return b}
function r(a){a%=1;0>a&&(a+=1);a*=6;var c=Math.floor(a);a-=c;const b=1-a;let d;switch(c%6){case 0:c=1;d=a;a=0;break;case 1:c=b;d=1;a=0;break;case 2:c=0;d=1;break;case 3:c=0;d=b;a=1;break;case 4:c=a;d=0;a=1;break;case 5:c=1;d=0;a=b;break;default:a=d=c=0}return[c,d,a]}function v(a,c){a=a*Math.PI/180;var b=(90-c)*Math.PI/180,d=Math.sin(b);c=d*Math.cos(a);a=d*Math.sin(a);b=Math.cos(b);d=Math.sqrt(c*c+a*a+b*b);return[c/d,a/d,b/d]}
class ka{constructor(a){this.i=a;this.pop=!1;this.C=0;this.tb={x:0,y:0,w:0,v:0};this.j={ba:{h:"wave speed",o:"wsp",g:0,min:.95,max:.999,m:.001,l:"global"},N:{h:"damping",o:"dmp",g:0,min:.9,max:.999,m:.001,l:"global"},T:{h:"propagation",o:"pgs",g:0,min:2,max:16,m:2,hc:!0,l:"global"},ta:{h:"refraction",o:"rft",g:0,min:0,max:5,m:.01,l:"visual"},Ca:{h:"water hue",o:"wth",g:0,min:0,max:1,m:.01,l:"visual",S:()=>p(this)},Aa:{h:"tint",o:"tnt",g:0,min:0,max:1,m:.005,l:"visual"},wa:{h:"specular",o:"sps",g:0,
min:0,max:5,m:.01,l:"visual"},ua:{h:"roughness",o:"rgs",g:0,min:0,max:1,m:.01,l:"visual"},ka:{h:"effect",o:"fre",g:0,min:0,max:3,m:.05,l:"fresnel"},la:{h:"power",o:"frp",g:0,min:.1,max:5,m:.01,l:"fresnel"},sa:{h:"reflection",o:"frr",g:0,min:0,max:5,m:.05,l:"fresnel"},qa:{h:"blur",o:"blr",g:0,min:0,max:5,m:.01,l:"fresnel"},ra:{h:"distortion",o:"dst",g:0,min:0,max:30,m:.1,l:"fresnel"},va:{h:"sky hue",o:"skh",g:0,min:0,max:1,m:.01,l:"world",S:()=>p(this)},ia:{h:"depth",o:"dpt",g:0,min:0,max:15,m:.1,
l:"world"},ca:{h:"scatter",o:"sct",g:0,min:0,max:1,m:.01,l:"world"},ja:{h:"environment",o:"env",g:0,min:0,max:5,m:.01,l:"world"},U:{h:"radius",o:"trd",g:0,min:.005,max:.1,m:.001,l:"touch"},R:{h:"impact",o:"tmp",g:0,min:.01,max:2,m:.01,l:"touch"},aa:{h:"trail",o:"ttr",g:0,min:0,max:5,m:.05,l:"touch"},$:{h:"spread",o:"tsp",g:0,min:0,max:5,m:.05,l:"touch"},ha:{h:"strength",o:"css",g:0,min:0,max:1,m:.01,l:"caustic"},fa:{h:"scale",o:"csc",g:0,min:.5,max:3,m:.05,l:"caustic"},ga:{h:"speed",o:"csp",g:0,min:0,
max:1,m:.005,l:"caustic"},da:{h:"brightness",o:"csb",g:0,min:0,max:2,m:.01,l:"caustic"},ea:{h:"detail",o:"csd",g:0,min:0,max:5,m:.05,l:"caustic"},za:{h:"sun",o:"sun",g:0,min:0,max:10,m:.1,l:"sunlight"},qb:{h:"sun hue",o:"snh",g:0,min:0,max:1,m:.01,l:"sunlight",S:()=>u(this)},xa:{h:"sun angle",o:"sth",g:0,min:0,max:360,m:5,l:"sunlight",S:()=>u(this)},ya:{h:"sun height",o:"sph",g:0,min:0,max:90,m:1,l:"sunlight",S:()=>u(this)},oa:{h:"light",o:"lht",g:0,min:0,max:10,m:.1,l:"sunlight"},mb:{h:"light hue",
o:"lih",g:0,min:0,max:1,m:.01,l:"sunlight",S:()=>u(this)},ma:{h:"light angle",o:"lth",g:0,min:0,max:360,m:5,l:"sunlight",S:()=>u(this)},na:{h:"light height",o:"lph",g:0,min:0,max:90,m:1,l:"sunlight",S:()=>u(this)},Da:{h:"waves",o:"rfs",g:0,min:0,max:3,m:.001,l:"reflect"},pa:{h:"mirror",o:"rfm",g:0,min:0,max:10,m:.01,l:"reflect"},Ba:{h:"velocity",o:"rfv",g:0,min:0,max:10,m:.05,l:"reflect"}};this.K=x(this.i.fb,["params"]);this.u=x(this.K,"gear");this.s=x(this.K,"pwrp");this.P=x(this.s,"switch");this.F=
x(this.s,"preset");x(this.F,"preprev","<").addEventListener("click",()=>y(this,-1));this.M=x(this.F,"prename","default");x(this.F,"prenext",">").addEventListener("click",()=>y(this,1));this.L={close:{h:"about",I:"cmd",H:()=>{window.location="https://nicopr.fr/ripples3"}},toggle:{h:"flow",I:"swp",H:()=>{var b=this.i;b.La?F(b):b.Za()},lc:!0},reset:{h:"reset",I:"cmd",H:()=>G(this.i)},vc:{h:"upscl",I:"cmd",H:()=>{var b=this.i;b.j!=b.O&&H(b,b.j+.5)}},sc:{h:"full",I:"cmd",H:()=>{document.fullscreenEnabled&&
(document.fullscreenElement?document.exitFullscreen():this.i.B.requestFullscreen())}},share:{h:"share",I:"cmd",H:()=>aa(this)},rc:{h:"image",I:"cmd",H:()=>ca(this)},xc:{h:"test",I:"swp",H:()=>{var b=this.i;b.V?b.V&&(clearInterval(b.rb),b.V=!1,b.u.toggle("test",b.V)):la(b)}},wc:{h:"    ",I:"cmd",H:()=>{}},qc:{h:"point",I:"swp",H:()=>{var b=this.i;b.M?b.M&&(b.M=!1,b.u.toggle("point",b.M)):ma(b)}},tc:{h:"rain",I:"swp",H:()=>{var b=this.i;b.Xa?(b.Xa=!1,b.u.toggle("rain",!1)):(b.Xa=!0,b.kb=0,b.Ta=new Set,
I(b),b.u.toggle("rain"))}},uc:{h:"swirl",I:"cmd",H:()=>{A(this);setTimeout(()=>{var b=this.i;for(let d=0;3>d;d++)na(b,b.w/2,b.v/2,.3*Math.min(b.w,b.v),2*Math.PI/3*d,b.bc)},200)}}};da(this);this.A=new Map;this.G=new Map;this.J=new Map;this.O=this.W.bind(this);this.B=this.V.bind(this);Object.keys(this.L).forEach(b=>{b=this.L[b];"cmd"===b.I?ea(this,b):"swp"===b.I&&fa(this,b)});const c=l["default"];Object.keys(this.j).forEach(b=>{const d=this.j[b];d.key=b;d.g=c[b];ha(this,d)});this.u.addEventListener("click",
()=>A(this));this.K.addEventListener("transitionend",()=>B(this))}toggle(a,c=!0){this.s.querySelector("."+a).classList.toggle("toggled",c)}W(a){var c=a.pointerId;if(this.A.has(c)){var b=this.j[a.currentTarget.dataset.yb],d=b.max-b.min;a=(a.pageX-this.J.get(c))/256*d;c=this.G.get(c)+a;c=Math.max(b.min,Math.min(b.max,c));a=b.m;c=Math.round((c+Number.EPSILON)/a)*a;c!==b.g&&(b.g=c,b.bb.innerHTML=b.g.toFixed(String(b.m).split(".")[1]?.length||0),C(b),b.hc&&(G(this.i),this.i.$a()),b.S?b.S(b.g):this.i.s[b.key]=
b.g,b=this.i,b.Ha=!0,b.Ia=!0)}}V(a){let c=a.pointerId;this.A.has(c)&&(a=a.currentTarget,a.classList.remove("down"),a.removeEventListener("pointermove",this.O),a.removeEventListener("pointerup",this.B),a.removeEventListener("pointercancel",this.B),a.releasePointerCapture(c),this.A.delete(c),this.J.delete(c),this.G.delete(c))}};const J=a=>{console.error(a);const c=document.createElement("div");c.classList.add("err");c.innerHTML="<div>liquify fail</div><br/>"+a;document.body.appendChild(c)};
window.addEventListener("load",()=>{console.log(atob("aHR0cHM6Ly9uaWNvcHIuZnIvcmlwcGxlczM"));window.addEventListener("error",a=>{J(a.error);return!1});window.addEventListener("unhandledrejection",a=>{J(a.reason);return!1});try{const a=new oa(document.querySelector("#ripples3")),c=new ka(a);pa(a,c,D(c)).then(()=>{setTimeout(()=>{},500+Math.round(500*Math.random()))}).catch(b=>J(b))}catch(a){J(a)}});
function G(a){const c=a.i,b=new Float32Array(a.w*a.v*4);for(let d=0;d<b.length;d+=4)b[d]=0,b[d+1]=0,b[d+2]=0,b[d+3]=1;[a.G,a.L].forEach(d=>{c.bindTexture(c.TEXTURE_2D,d);c.texImage2D(c.TEXTURE_2D,0,c.RGBA32F,a.w,a.v,0,c.RGBA,c.FLOAT,b)});a.Fa=a.P;a.Ga=a.G;a.W=a.L}function E(a,c){window.requestAnimationFrame(()=>a.Qa.textContent=c)}
function pa(a,c=null,b={}){a.u=c;a.s={...a.s,...b};a.D=a.s.D;a.Qa=document.querySelector("#fps");return[a.Eb,a.$b,a.Zb,a.Wb,a.Yb,a.Vb,a.Lb,a.Nb,a.Xb,a.Mb,a.$a,a.ac,a.Za].map(d=>d.bind(a)).reduce((d,e)=>d.then(()=>e()),Promise.resolve()).then(()=>K(a,1).then(()=>{var d=a.u;z(d,d.i.s);u(d);p(d);d=d.i;d.Ha=!0;d.Ia=!0})).catch(d=>{throw d;})}function L(a){a.nb=a.fb.offsetWidth;a.lb=a.fb.offsetHeight;a.cb=+Math.max(.4,Math.min(1,.4+.6*Math.log10(Math.max(a.nb,a.lb)/420))).toFixed(3);a.Pa=2/a.j}
function K(a,c){return new Promise(b=>{a.B.addEventListener("transitionend",()=>b(),{once:!0});a.B.style.opacity=c})}function F(a){a.La&&(a.La=!1,cancelAnimationFrame(a.wb),M(a),a.u.toggle("flow",!1))}
function N(a){if(a.image?.complete){a.F.fillStyle="#000000";a.F.fillRect(0,0,a.w,a.v);a.F.save();a.F.translate(0,a.v);a.F.scale(1,-1);var c=a.image.naturalWidth,b=a.image.naturalHeight,d=a.w/a.v;if(d>c/b){var e=c;var f=Math.round(c/d);c=0;b=Math.round((b-f)/2)}else f=b,e=Math.round(b*d),b=0,c=Math.round((c-e)/2);a.F.drawImage(a.image,c,b,e,f,0,0,a.w,a.v);a.xb.forEach(g=>{const {x:h,y:k,w:q,v:m}=g.c();a.F.globalAlpha=.55;a.F.shadowColor="#000000";a.F.shadowBlur=16;a.F.drawImage(g.dc,h,k,q,m)});a.F.restore();
e=a.i;e.bindTexture(e.TEXTURE_2D,a.Oa);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,a.Ua)}}function O(a){return new Promise(c=>{const b=new Image;b.addEventListener("load",()=>c(b));b.addEventListener("error",()=>{throw Error("image load error "+a);});b.crossOrigin="anonymous";b.src=a})}async function P(a){return await (new Response((new Response(Uint8Array.from(atob(a),c=>c.charCodeAt(0)))).body.pipeThrough(new DecompressionStream("gzip")))).text()}
function Q(a){const c=a.i,b=c.createTexture();c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.RGBA32F,a.w,a.v,0,c.RGBA,c.FLOAT,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);if(c.getError()!==c.NO_ERROR)throw Error("create water texture fail");return b}
function R(a,c){a=a.i;const b=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,b);a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,c,0);c=a.checkFramebufferStatus(a.FRAMEBUFFER);if(c!==a.FRAMEBUFFER_COMPLETE)throw Error(`incomplete framebuffer ${c}`);return b}
function qa(a){const c=a.i;[a.G,a.L].forEach(b=>{c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.RGBA32F,a.w,a.v,0,c.RGBA,c.FLOAT,null)});[a.P,a.gb].forEach(b=>{c.bindFramebuffer(c.FRAMEBUFFER,b);if(c.checkFramebufferStatus(c.FRAMEBUFFER)!==c.FRAMEBUFFER_COMPLETE)throw Error("incomplete resized framebuffer");});c.bindFramebuffer(c.FRAMEBUFFER,null)}
function ra(a){M(a);a.u.K.classList.toggle("msk",!0);Promise.resolve().then(()=>{B(a.u);S(a);K(a,1);a.u.K.classList.toggle("msk",!1);T(a,2E3)})}function M(a){a.Ea&&(a.Qa.textContent="x"+a.j.toString()+" --",a.Ea=!1,a.Ra=0,a.Va=0)}function S(a){L(a);a.Lb();a.$a();a.Nb();a.Mb()}function T(a,c=1E3){a.Ea||(a.Ea=!0,a.Ja=Array(32).fill(16.67),a.Wa=533.44,a.Ka=0,a.Hb=a.Ma+c)}
function sa(a){const c=a.i;c.uniform2fv(a.J.pb,[a.w,a.v]);c.uniform1f(a.J.eb,a.j);Object.keys(a.s).forEach(b=>{const d=a.s[b];b=a.J[b];"number"===typeof d?c.uniform1f(b,d):d instanceof Array&&c.uniform3fv(b,d)});a.Ia=!1}
function U(a){a.wb=requestAnimationFrame(c=>{a.Sa+=a.Pa;U(a);var b=a.i;b.useProgram(a.Na);b.bindFramebuffer(b.FRAMEBUFFER,a.Fa);a.Ha&&(b.uniform2f(a.C.pb,a.w,a.v),b.uniform1f(a.C.eb,a.j),b.uniform1f(a.C.cb,a.cb),b.uniform1f(a.C.ba,a.s.ba),b.uniform1f(a.C.N,a.s.N),b.uniform1f(a.C.T,a.Ib),a.Ha=!1);b.uniform1f(a.C.Pa,a.Pa);b.uniform1f(a.C.time,a.Sa);b.bindBuffer(b.ARRAY_BUFFER,a.ab);var d=b.getAttribLocation(a.Na,"position");b.enableVertexAttribArray(d);b.vertexAttribPointer(d,2,b.FLOAT,!1,0,0);d=a.i;
const e=Array.from(a.A.values()),f=Math.min(e.length,10);d.uniform1i(a.C.nc,f);if(0!==f){a.Z.fill(0);for(let g=0;g<f;g++){const h=e[g];a.Z[2*g]=h.x;a.Z[2*g+1]=h.y;a.Z[2*(g+f)]=h.X;a.Z[2*(g+f)+1]=h.Y;const k=a.C.touches[g];d.uniform2f(k.position,h.x,h.y);d.uniform1f(k.fc,h.U);d.uniform1f(k.N,h.Fb);d.uniform1f(k.kc,h.R);d.uniform1f(k.oc,h.aa);d.uniform1f(k.jc,h.$);d.uniform1f(k.angle,h.Gb)}d.uniform2fv(a.C.Z,a.Z)}b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a.W);b.uniform1i(a.C.ob,0);b.drawArrays(b.TRIANGLE_STRIP,
0,4);[a.Fa,a.Ga,a.W]=[a.Fa===a.P?a.gb:a.P,a.Ga===a.G?a.L:a.G,a.W===a.G?a.L:a.G];b=a.i;b.useProgram(a.Ya);b.bindFramebuffer(b.FRAMEBUFFER,null);b.clearColor(0,0,0,1);b.clear(b.COLOR_BUFFER_BIT);b.bindBuffer(b.ARRAY_BUFFER,a.ab);d=b.getAttribLocation(a.Ya,"position");b.enableVertexAttribArray(d);b.vertexAttribPointer(d,2,b.FLOAT,!1,0,0);a.Ia&&sa(a);b.uniform1f(a.J.time,a.Sa);b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a.Ga);b.uniform1i(a.J.pc,0);b.activeTexture(b.TEXTURE1);b.bindTexture(b.TEXTURE_2D,
a.Oa);b.uniform1i(a.J.Oa,1);b.activeTexture(b.TEXTURE2);b.bindTexture(b.TEXTURE_2D,a.W);b.uniform1i(a.J.ob,2);b.drawArrays(b.TRIANGLE_STRIP,0,4);d=b.getError();if(d!==b.NO_ERROR)throw Error("render step error "+d);b=c-a.Ma;a.Ma=c;a.Ja[a.Ka]=b;a.Ka=a.Ka+1&a.Ja.length-1;a.Wa=a.Wa-a.Ja[a.Ka]+b;b=Math.round(1E3/(a.Wa/a.Ja.length));b!==a.Va&&(a.Va=b,a.Qa.textContent="x"+a.j.toString()+" "+(""+b).padStart(2,"0"));a.Ea&&!(c<a.Hb)&&1E3<=c-a.Bb&&(a.Bb=c,a.Ra++,3<=a.Ra&&(a.Ra=0,50>a.Va?1!==a.j&&(a.vb=a.j-.5,
H(a,a.j-.5)):a.j<a.vb&&a.j<a.O&&a.j!=a.O&&H(a,a.j+.5)))})}function H(a,c){c!==a.j&&(M(a),a.j=Math.max(1,Math.min(a.O,c)),S(a),T(a))}function V(a){a.isActive?a.Za():F(a)}function W(a,c){const b=c.offsetX;c=c.offsetY;return{x:b*a.j,y:a.v-c*a.j,rx:b,ry:c}}function X(a){return{U:a.s.U,Fb:a.s.Fb,R:a.s.R,aa:a.s.aa,$:a.s.$,Gb:a.s.Gb}}
function Y(a){if(a.u.pop){const c=Array.from(a.A.values()).some(b=>{var d=b.rx;b=b.ry;var e=a.u.tb;return d>=e.x&&d<=e.x+e.w&&b>=e.y&&b<=e.y+e.v});c!==a.ib&&(a.ib=c,clearTimeout(a.zb),a.zb=setTimeout(()=>{a.u.K.classList.toggle("msk",a.ib)},100))}}function I(a){if(a.Xa){var c=performance.now();384<c-a.kb&&4>a.Ta.size&&8>a.A.size&&(ta(a),a.kb=c);requestAnimationFrame(()=>I(a))}}
function ta(a){const c=Math.random()*a.w,b=Math.random()*a.v,d="rain_"+Math.random().toString(36).slice(-6);a.A.set(d+"_impact",{x:c,y:b,X:c,Y:b,...X(a),U:.02,R:.24});a.Ta.add(d);setTimeout(()=>{a.A.delete(d+"_impact");a.Ta.delete(d)},80)}
function na(a,c,b,d,e,f){const g=Math.random().toString(36).slice(-6),h=performance.now(),k=c+Math.cos(e)*d,q=b+Math.sin(e)*d,m={x:k,y:q,X:k,Y:q,...X(a),speed:2.5};a.A.set(g,m);const w=()=>{var n=performance.now()-h;if(1>n/3333){const Z=e+.001*n*m.speed;n=f(n,0,1,3333);n=d*(1-n);if(a.A.has(g)){const t=a.A.get(g);t.X=t.x;t.Y=t.y;t.x=c+Math.cos(Z)*n;t.y=b+Math.sin(Z)*n;requestAnimationFrame(w)}}else a.A.delete(g)};requestAnimationFrame(w)}
function ma(a){if(!a.M){a.M=!0;var c=Math.PI/4,b=.5*a.w,d=.5*a.v,e=.35*a.w,f=.35*a.v,g=0,h=2.5,k=2.5,q=0,m={x:b,y:d,X:b,Y:d,...X(a)};a.A.set("auto",m);var w=()=>{if(a.M){m.X=m.x;m.Y=m.y;var n=performance.now();3E3<n-q&&(k=3+3*Math.random(),q=n);h+=.004*(k-h);g+=.016*h;m.x=b+e*Math.sin(.15*g);m.y=d+f*Math.sin(.23*g+c);requestAnimationFrame(w)}else a.A.delete("auto")};w();a.u.toggle("point")}}
function la(a){a.V||(a.V=!0,a.rb=setInterval(()=>{const c=a.w/2,b=a.v/2,d="test_"+Math.random().toString(36).slice(-6);a.A.set(d,{x:c,y:b,X:c,Y:b,...X(a)});setTimeout(()=>a.A.delete(d),256)},500),a.u.toggle("test"))}
class oa{constructor(a=document.body){this.j=this.O=2;this.Ea=!1;this.Ra=0;this.vb=this.O;this.cb=this.lb=this.nb=0;this.fb=a;L(this);this.s=l["default"];this.u=this.zb=this.Jb=this.D=this.image=this.B=this.i=this.ab=this.Na=this.C=this.Ya=this.J=this.Ga=this.W=this.Oa=this.G=this.L=this.Fa=this.P=this.gb=null;this.wb=-1;this.ib=!1;this.cc=new Float32Array([-1,-1,1,-1,-1,1,1,1]);this.Z=new Float32Array(40);this.Ib=this.s.T;this.Va=0;this.Ja=[];this.Hb=this.Bb=this.Ma=this.Ka=this.Wa=0;this.La=!1;
this.jb=this.isVisible=!0;this.V=this.M=this.Ab=!1;this.rb=null;this.Xa=!1;this.kb=0;this.Ta=null;this.A=new Map;this.Pa=1;this.Sa=0;this.xb=[];this.Qa=null;this.Ia=this.Ha=!0;this.Ua=document.createElement("canvas");this.F=this.Ua.getContext("2d",{alpha:!1});this.B=document.createElement("canvas");this.B.style.opacity="0";a.appendChild(this.B)}async load(a){E(this,"loading");await K(this,0);F(this);G(this);a.D&&a.D!=this.D&&(this.D=a.D,await this.Eb(),N(this));this.s={...l["default"],...this.s,...a};
this.$a();u(this.u);p(this.u);this.Za();await K(this,1)}async Eb(){this.image=await O((this.D.startsWith("blob:")?"":"assets/")+this.D)}async $b(){this.xb.push({dc:await O("assets/github-mark-white.png"),c:()=>({x:this.w-42*this.j,y:6*this.j,w:36*this.j,v:36*this.j})})}Zb(){this.i=this.B.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,stencil:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1});if(!this.i)throw Error("webgl2 not supported");if(!this.i.getExtension("EXT_color_buffer_float"))throw Error("ext_color_buffer_float not supported");
this.i.getExtension("OES_texture_float_linear");const a=this.i.getError();if(a!==this.i.NO_ERROR)throw Error("webgl init error "+a);}async Wb(){const a=await P("H4sIAAAAAAAAClMuSy0qzszPUzA2MFBILebKzFMoS002UijIL84syczPs84vLYGIlKRWOOfnF6VYl+VnpijkJmbmaWhWwwRtYeq19Ey19Uyt03PiA6AitmWpySYaMHkdAx1DTetaAIBqaOZ3AAAA"),c=await P("H4sIAAAAAAAACoVUXW/bIBR936+wNGkCh2A7TdZt1J20dm97iJpKe5j6gGxsI9nG4iNNV+W/T2DskHTT3uDCveecy+G+3zOpuOijqzSNmHo3SFZwF2h43QxR1QqqyWVU0W5omVzdE9PzSsgu2rNiFZkHpkRrNBf9fOAKROaetZo+8o4hc8/V0NKXXUFbhsyO/2bfqGLI/KR7thsYK5G5p93A+xqZrRQDramt6I7msjODyGwl23Nh1E5TzS4IPQpTNL+y9GmO81778J0wvSZKS1PoyEVeXdIgFHcSRuqSltwov1Fasr7Wjd9qSXk7HQ2S0ZIcZyRX0mNtqaSdckR4P3LT7HAnhCyJMNpG1lElaX0nWiF9xZrpRwvwvapYoYHLKoyUrNdbodBIVrK93YQc/Oa5odp2F76ekpa5T/AQndizH6zPW6cKnC5CwivgT28ytlxDybSRfZRi4sNJPiGQU16S+1PigfJJZxy4Y3nOgrair53UvBQaTJpCNh79dPM2T/HXFH/p6AGkGGV46TX47OXpahwUSibOydgrGHu+MV6T417wMuoo7wH0XuAH1uZ2CTKYhP52L6as5axCbSQD505Ek3DoVTaM143OXQ4+IGW6PMWkEhJYT/I8JfwmWxG+WMBX35e+blnu1oDDGG9WV5vPn66vN0SZbvEv3KKl3QAm9IUjXwgFXDWIFO/9EsZOXvzmlzlrgRQiLxxCfCBHS7jjBzDqsPyTbIXjFV6Okl6CLwzj6Q+TczPm9r2CPuIDCncvEGmhqbf82/6EPzdoVMmVnjwM/mo4Pwn4E0zA/ygk81CCECk7psoHNwTys8/Mn7CfDbwClsFNeHeipm2Gl3OZPk2TeBDPQHVC6EZpNoCwDkoxssUhyvAGxvijRbss5ObQbYo/fOC3KQwgF28w3dX4YrTM3UHTaplN64DuOF3muUKCp1rkASo5HkeDns7JPNzsb1oDZTrkjZSiDJLjHw4nVcaJBgAA"),
b=await P("H4sIAAAAAAAACo1XS4/bNhC+91cY6IWkaEay10gDrQ7dbIIUaIJgnaSHxR5YmbaJyKJAkVo7xf73gi+9nfawXpEcfTOcxzejXxsmay7KxTqOF6z+pZIs53bjyA/HarEvBFXpeLemp6pgcnWf6pLvhTwtGpavFvqB1aLQiouyPbAAC/2FnxjW97yuCnrZ5rRgrUQLttB/UcXkB8YPR4X1Hc2/H6TQ5e4LOystGdafJWu40PVWUcX6utcLvdXlPZcsN9qx/tNgtOuxNVtd/lEqVtZcXbxsu57CvhWFkF7MP1tD7fP0oqXaKsnKgzpiva1Yrgsqu50HoQ/HktU11u8lq0tWvNvvWa7a5WfxzGT3pl8+sH3h7uLF+lv3vFZCDi7qjf9+mTXynlXq+J7mytzld3USdXVkkufbnCpl1L0rm4+06vnoLdW14nl3j7BhQtmtKsZ27epOGo+5u/qte6YoL4z/GtbZ36F+5FIKOXfyjRUi5+rSc4S3v9u5K7RbS+rCzkuXmIqd3wohd6nQyuzcLPaSHpxrrKcOTH0S8kQLYOUrfmYFNsLOYY1XDv9xed5kLaJF21FFzZbJUjDM4gam4e0MGDlyXtp/F4iG9WCVomxFUt1kRg+4ghjZQytOzjiGkJyXV0SXU1H8U9QYO+HLf6MORCEim9Q5q7SODJHLEhLRv2vQuhDZC6JsKDbyhWRKy9JD8R/MhGUNdIMTCNMXp+fAlM+q2h57aTwOGd+DcfreZjGBXkdMUhvU3GN9/dYGFw2yPHL45HxB87XXxtmyHRoUhdPxTGXlQlvzEnQayQWtSNSajEen5/4pSsgaQkSStJOIMoPs/b+zNZYNSw79RlJ/MAF3+516NDFuJGFNCDFyZ4hsIrLphabz0CA49rnw5OxWDWfPZjGOm1t/2gn1ITvRM9gJBTxKlxcBKvIoEOKYQEyL6kizjmxRj3ft2Sqz/5D9TZ24VYXcL3BSy4TAKCHhrid+9gevAM1FDcw56iFBdJ3CKvEMLPiI3CECkxpJYgLRNZasT0KoY61YBWKCE4KH716lSpSQFYRo0pTQyLvBp9aV6YsNkmvShmAl23WdGXg+9MGTdMd1jTsOtdXndm8zEsdJqLqWWWa6fAPJ+fLDVYzY72um6sfNk62bxyfguAdaJSDB4WnZPcY4aZ+WhjCccc+WviyU3Xh8AmSDSbIa/0DXE3LTHjJLPDFM90ICXqoFz+KU325SHkW+GzjXfG2yvKCnCugmCkbzJ+TujlxDsdGCqQWOsp+4IEBaR6BgOH9KX7z7LET60gi+W5woL4G3xerJEvKqP4r1q8zfBxsfpcOKS3t1mnUN0ZneplcgmZb2XG5lJ16CMc/b21pU6Xqy7bjZtVxy/gvkO6Jb39K9D8dd35bQ2CboGhRMJ8ZOKqhVPW13wR5IzmgwODlLgkNqNzr5JBhrRHNTlr/K3g10meGHhCxHxRh4zdKaORvOicYCNJwkTZljOaGN6aW9YohrXQZOyIbUPeHbwZgNg3Vdejjy+N9owzF9Bq9rqv123zaTNinDOGfy+8ZnkmHr8NdPQGw2eiM8budkRNbYBxLiaQz7s70lUzwPHeBsfwMJnInG7B4az91oZu6feS8yWoOu7ouFrFcQ9WKLBt89aE1s1YQsGIL0PnbI6gaiQVjR6JMJrQZQiGxg5JAwefMakzcQtaPDeBRD068FBEwdTKrZqFj66CDyGkKb6J2zw9FMqcFQawlMX/4FdhFFoPMOAAA=");
this.Na=this.createProgram(a,c);this.Ya=this.createProgram(a,b)}Vb(){this.ab=this.i.createBuffer();this.i.bindBuffer(this.i.ARRAY_BUFFER,this.ab);this.i.bufferData(this.i.ARRAY_BUFFER,this.cc,this.i.STATIC_DRAW)}Lb(){const a=Math.round(this.lb*this.j);this.B.width=this.Ua.width=Math.round(this.nb*this.j);this.B.height=this.Ua.height=a}Nb(){this.i.viewport(0,0,this.w,this.v)}$a(){this.Ib=2*Math.floor(this.s.T*this.j/2/2);this.Ia=this.Ha=!0}Xb(){const a=this.i;this.G=Q(this);this.L=Q(this);const c=
this.i,b=c.createTexture();c.bindTexture(c.TEXTURE_2D,b);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,this.w,this.v,0,c.RGBA,c.UNSIGNED_BYTE,null);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);this.Oa=b;this.P=R(this,this.G);this.gb=R(this,this.L);this.Fa=this.P;this.Ga=this.G;this.W=this.L;a.bindFramebuffer(a.FRAMEBUFFER,
null);a.bindTexture(a.TEXTURE_2D,null)}Mb(){qa(this);N(this)}Ub(){clearTimeout(this.Jb);K(this,0);this.Jb=setTimeout(()=>ra(this),128)}Yb(){const a=(c,b)=>Object.keys(b).reduce((d,e)=>({...d,[e]:this.i.getUniformLocation(c,`u${b[e]}`)}),{});this.C={...a(this.Na,{pb:"Resolution",eb:"DisplayScale",cb:"SizeBase",Pa:"DeltaTime",time:"Time",ba:"WaveSpeed",N:"Damping",T:"PropagationSpeed",ob:"PreviousState",Z:"Touch",nc:"TouchCount"}),touches:Array(10).fill({}).map((c,b)=>{c=`TouchParams[${b}].`;return a(this.Na,
{position:`${c}position`,fc:`${c}radius`,N:`${c}damping`,kc:`${c}strength`,oc:`${c}trail`,jc:`${c}spread`,angle:`${c}angle`})})};this.J=a(this.Ya,{pb:"Resolution",time:"Time",eb:"DisplayScale",ob:"PreviousState",pc:"WaterHeight",Oa:"BackgroundTexture",Db:"SunDirection",ub:"LightDirection",za:"SunIntensity",oa:"LightIntensity",mc:"SunColor",ec:"LightColor",ta:"Refraction",Kb:"WaterColor",Aa:"TintStrength",wa:"SpecularStrength",ua:"Roughness",ka:"FresnelEffect",la:"FresnelPower",ic:"SpecularPower",
Cb:"SkyColor",ia:"DepthFactor",ca:"AtmosphericScatter",ja:"EnvMapIntensity",sa:"ReflectionFresnel",qa:"ReflectionBlur",ra:"ReflectionDistortion",ha:"CausticStrength",fa:"CausticScale",ga:"CausticSpeed",da:"CausticBrightness",ea:"CausticDetail",Da:"WaveReflectionStrength",pa:"MirrorReflectionStrength",Ba:"VelocityReflectionFactor"})}createProgram(a,c){const b=this.i,d=b.createProgram(),e=(h,k)=>{h=b.createShader(h);b.shaderSource(h,k);b.compileShader(h);if(!b.getShaderParameter(h,b.COMPILE_STATUS))throw k=
b.getShaderInfoLog(h),b.deleteShader(h),Error(`compile shader fail ${k}`);return h};let f,g;try{if(f=e(b.VERTEX_SHADER,a),g=e(b.FRAGMENT_SHADER,c),b.attachShader(d,f),b.attachShader(d,g),b.linkProgram(d),!b.getProgramParameter(d,b.LINK_STATUS))throw Error(`link program fail ${b.getProgramInfoLog(d)}`);}catch(h){throw h;}finally{f&&b.deleteShader(f),g&&b.deleteShader(g)}return d}Za(){if(!this.La){var a=1E3;this.Ma||(a*=2);this.La=!0;this.u.toggle("flow");this.Ma=performance.now();T(this,a);U(this)}}Pb(){this.jb=
!1;V(this)}Qb(){this.jb=!0;V(this)}Rb(){this.load(D(this.u))}ac(){document.addEventListener("visibilitychange",()=>{this.isVisible="visible"===document.visibilityState;V(this)});Object.entries({blur:this.Pb,focus:this.Qb,resize:this.Ub,hashchange:this.Rb}).forEach(([a,c])=>window.addEventListener(a,c.bind(this)));Object.entries({touchstart:this.Ob,pointerdown:this.Tb,pointermove:this.Sb,pointerup:this.hb,pointerout:this.hb,pointercancel:this.hb}).forEach(([a,c])=>this.B.addEventListener(a,c.bind(this)))}Ob(a){a.preventDefault()}Tb(a){const c=
a.pointerId;this.Ab||(this.Ab=!0);this.B.setPointerCapture(c);a=W(this,a);this.A.set(c,{x:a.x,y:a.y,X:a.x,Y:a.y,...X(this)})}Sb(a){var c=a.pointerId;this.A.has(c)&&(c=this.A.get(c),a=W(this,a),c.X=c.x,c.Y=c.y,c.x=a.x,c.y=a.y,c.rx=a.rx,c.ry=a.ry,Y(this))}hb(a){a=a.pointerId;this.A.has(a)&&(this.B.releasePointerCapture(a),this.A.delete(a),Y(this))}get w(){return this.B.width}get v(){return this.B.height}get isActive(){return(this.isVisible||!1)&&(this.jb||!0)}bc(a,c,b,d){return-b*Math.cos(a/d*(Math.PI/
2))+b+c}};}).call(this);
