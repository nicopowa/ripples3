/**
 * Nico Pr â€” https://nicopr.fr
 * RIPPLES3 PACKAGE RELEASE v0.1.3
 * 12/02/2025 10:26:29
 */
(function(){const m={"default":{G:"assets/img.webp",U:.997,I:.996,M:10,ua:.8,Ca:.619,Ka:[0,.286,1],Aa:.1,wa:.7,va:.16,la:1.2,ma:2.6,nb:39,ta:1,ra:.2,sa:.5,Y:.583,Ja:[0,.502,1],ja:2,da:.2,ka:.7,K:.027,J:.36,T:.25,S:.3,ia:.15,ga:1.4,ha:.02,ea:.42,fa:2.5,Xa:[.624,.332,.707],xa:28,ya:63,Va:[.659,-.534,.53],na:175,oa:60,za:6,Xb:.52,pa:1.2,Pb:.52,Da:.6,qa:.3,Ba:.15},clear:{U:.997,I:.994,M:14,ua:.79,Ca:.39,Aa:0,wa:2.87,va:.2,la:0,ma:1.57,ta:.8,ra:0,sa:8,Y:.583,ja:5,da:.1,ka:1.63,K:.026,J:.44,T:3.6,S:3.65,ia:.17,ga:1.3,
ha:.06,ea:.69,fa:1.1,za:.5,xa:45,ya:50,pa:7.1,na:215,oa:35,Da:3.32,qa:.89,Ba:2.5},thick:{U:.99,I:.986,M:4,ua:.6,Ca:.583,Aa:.105,wa:.9,va:.4,la:.5,ma:.515,ta:.6,ra:.3,sa:1.2,Y:.583,ja:3,da:.4,ka:.64,K:.033,J:1.21,T:3.8,S:3.4,ia:.3,ga:.6,ha:.08,ea:.21,fa:.35,za:0,xa:60,ya:61,pa:.4,na:250,oa:63,Da:0,qa:.2,Ba:.2},storm:{U:.997,I:.993,M:12,ua:.72,Ca:.611,Aa:.385,wa:.13,va:.42,la:2.7,ma:1.01,ta:2.1,ra:.25,sa:12.6,Y:.583,ja:8.9,da:.33,ka:.81,K:.032,J:.93,T:3.3,S:3.6,ia:0,ga:.5,ha:0,ea:0,fa:0,za:0,xa:30,
ya:60,pa:1.4,na:233,oa:44,Da:1.94,qa:1.09,Ba:.4},pool:{G:"assets/pool.webp",U:.997,I:.996,M:14,ua:.8,Ca:.619,Ka:[0,.286,1],Aa:.1,wa:.44,va:.16,la:.9,ma:.19,nb:39,ta:1,ra:.2,sa:.5,Y:.583,Ja:[0,.502,1],ja:1.1,da:.08,ka:.19,K:.027,J:.36,T:.25,S:.3,ia:.15,ga:1.6,ha:.06,ea:.5,fa:.5,Xa:[.588,0,.809],xa:0,ya:54,Va:[-.258,.965,.052],na:105,oa:3,za:.4,pa:0,Da:.59,qa:4.94,Ba:3.1}};function p(a){a%=1;0>a&&(a+=1);a*=6;var b=Math.floor(a);a-=b;const c=1-a;let d;switch(b%6){case 0:b=1;d=a;a=0;break;case 1:b=c;d=1;a=0;break;case 2:b=0;d=1;break;case 3:b=0;d=c;a=1;break;case 4:b=a;d=0;a=1;break;case 5:b=1;d=0;a=c;break;default:a=d=b=0}return[b,d,a]}function r(a){a.i.j.Xa=t(a.j.xa.g,a.j.ya.g);a.i.j.Va=t(a.j.na.g,a.j.oa.g)}function u(a,b,c=""){b=[b].flat();let d=document.createElement("div");d.classList.add(...b);c&&(d.innerHTML=c);a&&a.appendChild(d);return d}
function v(a,b){var c=Object.keys(m);b=a.B+b;var d=c.length-1;a.B=0>b?d:b>d?0:b;c=c[a.B];a.O.innerText=c;c={...m["default"],...m[c]};a.i.load(c);w(a,c)}
function x(a){const b=e=>Number(e.toFixed(3)),c={};Object.entries(a.j).forEach(([e,f])=>{c[e]=Array.isArray(f.g)?f.g.map(b):"number"===typeof f.g?Number(f.g.toFixed(3)):f.g});console.log(JSON.stringify(c));a=Object.entries(a.j).map(([e,f])=>f.o+"="+JSON.stringify(c[e]));const d=location.origin+location.pathname+"#"+a.join("&");a={title:document.title,url:d};navigator.share&&navigator.canShare(a)?navigator.share(a).then(()=>{}).catch(e=>{console.error(e);B(d)}):B(d)}
function aa(a){const b=document.createElement("input");b.type="file";b.accept=[".jpg",".png",".webp"];b.style.display="none";b.addEventListener("change",c=>{const d=URL.createObjectURL(c.target.files[0]);b.remove();a.i.load({G:d}).then(()=>{URL.revokeObjectURL(d)})});b.addEventListener("cancel",()=>{b.remove()});b.click()}function C(a){a.$.classList.toggle("pop");a.pop=a.$.classList.contains("pop")}
function ba(a,b){let c=u(a.V,["action",b.h.replaceAll(" ","-")],b.h);c.tabIndex=0;c.addEventListener("click",()=>{b.D();c.focus()})}function ca(a,b){u(a.V,["toggle",b.h.replaceAll(" ","-"),...(b.Wb?["toggle"]:[])],b.h).addEventListener("click",()=>b.D())}
function da(a,b){let c=u(null,"prop");c.dataset.Db=b.key;b.ob=u(c,"vbar");c.addEventListener("pointerdown",e=>{let f=e.pointerId;if(!a.v.has(f)){var g=e.currentTarget,h=a.j[g.dataset.Db];a.v.set(f,h.h);a.H.set(f,h.g);a.L.set(f,e.pageX);g.classList.add("down");g.setPointerCapture(f);g.addEventListener("pointermove",a.P);g.addEventListener("pointerup",a.A);g.addEventListener("pointercancel",a.A)}});u(c,"valt",b.h);b.Ua=u(c,"val",b.g);if(b.l){var d=b.l.toLowerCase().replaceAll(" ","-");(d=a.s.querySelector("."+
d))||(d=ea(a,b.l));d.querySelector(".cnt").appendChild(c)}else a.s.appendChild(c)}function D(a){const b=a.s.getBoundingClientRect();a.pb={x:Math.round(b.x),y:Math.round(b.y),w:Math.round(b.width),u:Math.round(b.height)}}function E(a){a.i.j.Ka=p(a.j.Ca.g);a.i.j.Ja=p(a.j.Y.g)}function w(a,b){Object.values(a.j).forEach(c=>{c.g=b[c.key];c.Ua.innerText=b[c.key];F(c)});r(a);E(a)}function F(a){a.ob.style.width=(a.g-a.min)/(a.max-a.min)*100+"%"}
function B(a){navigator.clipboard.writeText(a).then(()=>{}).catch(b=>{throw b;})}
function fa(a){const b=window.location.hash.slice(1);if(!b.length)return{};try{const c={},d=Object.fromEntries(Object.entries(a.j).map(([e,f])=>[f.o,e]));b.split("&").map(e=>e.split("=")).forEach(([e,f])=>{if(e=d[e]){var g=a.j[e];f=JSON.parse(f);g.g=f;g.Ua&&(g.Ua.innerText=f.toFixed(String(g.m).split(".")[1]?.length||0));g.ob&&F(g);g.R?g.R(f):c[e]=f}});a.O.innerText="custom";return c}catch(c){return G(a.i,"bad url"),console.error(c),{}}}
function ha(a,b){Array.from(a.s.querySelectorAll(".group")).forEach(c=>c.classList.toggle("exp",c===b&&!c.classList.contains("exp")))}function ea(a,b){let c=u(a.s,["group",b.toLowerCase().replaceAll(" ","-")]);b=u(c,"grp",b);let d=u(c,"wrp");u(d,"cnt");b.addEventListener("click",()=>ha(a,c));return c}function t(a,b){a=a*Math.PI/180;var c=(90-b)*Math.PI/180,d=Math.sin(c);b=d*Math.cos(a);a=d*Math.sin(a);c=Math.cos(c);d=Math.sqrt(b*b+a*a+c*c);return[b/d,a/d,c/d]}
class ia{constructor(a){this.i=a;this.pop=!1;this.B=0;this.pb={x:0,y:0,w:0,u:0};this.j={U:{h:"wave speed",o:"wsp",g:0,min:.95,max:.999,m:.001,l:"global"},I:{h:"damping",o:"dmp",g:0,min:.9,max:.999,m:.001,l:"global"},M:{h:"propagation",o:"pgs",g:0,min:2,max:16,m:2,Sb:!0,l:"global"},ua:{h:"refraction",o:"rft",g:0,min:0,max:5,m:.01,l:"visual"},Ca:{h:"water hue",o:"wth",g:0,min:0,max:1,m:.01,l:"visual",R:b=>{this.i.j.Ka=p(b)}},Aa:{h:"tint",o:"tnt",g:0,min:0,max:1,m:.005,l:"visual"},wa:{h:"specular",o:"sps",
g:0,min:0,max:5,m:.01,l:"visual"},va:{h:"roughness",o:"rgs",g:0,min:0,max:1,m:.01,l:"visual"},la:{h:"effect",o:"fre",g:0,min:0,max:3,m:.05,l:"fresnel"},ma:{h:"power",o:"frp",g:0,min:.1,max:5,m:.01,l:"fresnel"},ta:{h:"reflection",o:"frr",g:0,min:0,max:5,m:.05,l:"fresnel"},ra:{h:"blur",o:"blr",g:0,min:0,max:5,m:.01,l:"fresnel"},sa:{h:"distortion",o:"dst",g:0,min:0,max:30,m:.1,l:"fresnel"},Y:{h:"sky hue",o:"skh",g:0,min:0,max:1,m:.01,l:"world",R:()=>{this.i.j.Ja=p(this.j.Y.g)}},ja:{h:"depth",o:"dpt",
g:0,min:0,max:15,m:.1,l:"world"},da:{h:"scatter",o:"sct",g:0,min:0,max:1,m:.01,l:"world"},ka:{h:"environment",o:"env",g:0,min:0,max:5,m:.01,l:"world"},K:{h:"radius",o:"trd",g:0,min:.005,max:.1,m:.001,l:"touch"},J:{h:"impact",o:"tmp",g:0,min:.01,max:2,m:.01,l:"touch"},T:{h:"trail",o:"ttr",g:0,min:0,max:5,m:.05,l:"touch"},S:{h:"spread",o:"tsp",g:0,min:0,max:5,m:.05,l:"touch"},ia:{h:"strength",o:"css",g:0,min:0,max:1,m:.01,l:"caustic"},ga:{h:"scale",o:"csc",g:0,min:.5,max:3,m:.05,l:"caustic"},ha:{h:"speed",
o:"csp",g:0,min:0,max:1,m:.005,l:"caustic"},ea:{h:"brightness",o:"csb",g:0,min:0,max:2,m:.01,l:"caustic"},fa:{h:"detail",o:"csd",g:0,min:0,max:5,m:.05,l:"caustic"},za:{h:"sun",o:"sun",g:0,min:0,max:10,m:.1,l:"sunlight"},xa:{h:"sun angle",o:"sth",g:0,min:0,max:360,m:5,l:"sunlight",R:()=>r(this)},ya:{h:"sun height",o:"sph",g:0,min:0,max:90,m:1,l:"sunlight",R:()=>r(this)},pa:{h:"light",o:"lht",g:0,min:0,max:10,m:.1,l:"sunlight"},na:{h:"light angle",o:"lth",g:0,min:0,max:360,m:5,l:"sunlight",R:()=>r(this)},
oa:{h:"light height",o:"lph",g:0,min:0,max:90,m:1,l:"sunlight",R:()=>r(this)},Da:{h:"waves",o:"rfs",g:0,min:0,max:5,m:.01,l:"reflect"},qa:{h:"mirror",o:"rfm",g:0,min:0,max:10,m:.01,l:"reflect"},Ba:{h:"velocity",o:"rfv",g:0,min:0,max:10,m:.05,l:"reflect"}};this.$=u(document.body,["params"]);this.aa=u(this.$,"gear");this.s=u(this.$,"pwrp");this.V=u(this.s,"switch");this.C=u(this.s,"preset");u(this.C,"preprev","<").addEventListener("click",()=>v(this,-1));this.O=u(this.C,"prename","default");u(this.C,
"prenext",">").addEventListener("click",()=>v(this,1));this.N={close:{h:"about",F:"cmd",D:()=>{window.location="https://post.nicopr.fr/liquid-code/"}},toggle:{h:"flow",F:"swp",D:()=>{var b=this.i;b.Ea?H(b):b.hb()},Wb:!0},reset:{h:"reset",F:"cmd",D:()=>I(this.i)},pc:{h:"upscl",F:"cmd",D:()=>{var b=this.i;b.i!=b.N&&J(b,b.i+.5)}},kc:{h:"full",F:"cmd",D:()=>{document.fullscreenEnabled&&(document.fullscreenElement?document.exitFullscreen():document.body.requestFullscreen())}},share:{h:"share",F:"cmd",
D:()=>x(this)},jc:{h:"image",F:"cmd",D:()=>aa(this)},rc:{h:"    ",F:"cmd",D:()=>{}},qc:{h:"    ",F:"cmd",D:()=>{}},ic:{h:"point",F:"swp",D:()=>{var b=this.i;b.L?b.L&&(b.L=!1,b.A.toggle("point",b.L)):ja(b)}},mc:{h:"rain",F:"swp",D:()=>{var b=this.i;b.Qa?(b.Qa=!1,b.A.toggle("rain",!1)):(b.Qa=!0,b.$a=0,b.Ma=new Set,K(b),b.A.toggle("rain"))}},oc:{h:"swirl",F:"cmd",D:()=>{C(this);setTimeout(()=>{var b=this.i;for(let c=0;3>c;c++)ka(b,b.w/2,b.u/2,.3*Math.min(b.w,b.u),2*Math.PI/3*c,b.Nb)},200)}}};this.v=
new Map;this.H=new Map;this.L=new Map;this.P=this.ca.bind(this);this.A=this.ba.bind(this);Object.keys(this.N).forEach(b=>{b=this.N[b];"cmd"===b.F?ba(this,b):"swp"===b.F&&ca(this,b)});Object.keys(this.j).forEach(b=>{const c=this.j[b];c.key=b;c.g=this.i.j[b];da(this,c)});this.aa.addEventListener("click",()=>C(this));this.$.addEventListener("transitionend",()=>D(this))}toggle(a,b=!0){this.s.querySelector("."+a).classList.toggle("toggled",b)}ca(a){var b=a.pointerId;if(this.v.has(b)){var c=this.j[a.currentTarget.dataset.Db],
d=c.max-c.min;a=(a.pageX-this.L.get(b))/256*d;b=this.H.get(b)+a;b=Math.max(c.min,Math.min(c.max,b));a=c.m;b=Math.round((b+Number.EPSILON)/a)*a;b!==c.g&&(c.g=b,b=String(c.m).match(/\.(\d+)$/),c.Ua.innerHTML=c.g.toFixed(b?b[1].length:0),F(c),c.Sb&&(I(this.i),this.i.Ya()),c.R?c.R(c.g):this.i.j[c.key]=c.g)}}ba(a){let b=a.pointerId;this.v.has(b)&&(a=a.currentTarget,a.classList.remove("down"),a.removeEventListener("pointermove",this.P),a.removeEventListener("pointerup",this.A),a.removeEventListener("pointercancel",
this.A),a.releasePointerCapture(b),this.v.delete(b),this.L.delete(b),this.H.delete(b))}};const L=a=>{console.error(a);const b=document.createElement("div");b.classList.add("err");b.innerHTML="<div>liquify fail</div><br/>"+a;document.body.appendChild(b)};
window.addEventListener("load",()=>{console.log("https://github.com/nicopowa/ripples3");window.addEventListener("error",a=>{L(a.error);return!1});window.addEventListener("unhandledrejection",a=>{L(a.reason);return!1});try{const a=new la,b=new ia(a);ma(a,b,fa(b)).then(()=>{setTimeout(()=>{},500+Math.round(500*Math.random()))}).catch(c=>L(c))}catch(a){L(a)}});
function I(a){const b=a.s,c=new Float32Array(a.w*a.u*4);for(let d=0;d<c.length;d+=4)c[d]=0,c[d+1]=0,c[d+2]=0,c[d+3]=1;[a.C,a.H].forEach(d=>{b.bindTexture(b.TEXTURE_2D,d);b.texImage2D(b.TEXTURE_2D,0,b.RGBA32F,a.w,a.u,0,b.RGBA,b.FLOAT,c)});a.ba=a.O;a.ca=a.C;a.P=a.H}function G(a,b){window.requestAnimationFrame(()=>{a.Pa.textContent=b})}
function ma(a,b=null,c={}){a.A=b;a.j={...a.j,...c};a.Pa=document.querySelector("#fps");return[a.Kb,a.Lb,a.Jb,a.Gb,a.Ib,a.hc,a.Bb,a.Eb,a.Hb,a.Cb,a.Ya,a.Mb,a.hb].map(d=>d.bind(a)).reduce((d,e)=>d.then(()=>e()),Promise.resolve()).then(()=>M(a,1).then(()=>{console.log("liquified");var d=a.A;r(d);E(d)})).catch(d=>{throw d;})}function N(a){a.jb=window.innerWidth;a.ib=window.innerHeight;a.Wa=Math.max(a.jb,a.ib)/1024;a.Ia=2/a.i*a.sb*a.Qb}function O(a){a.aa&&(a.aa=!1,a.V=0,a.Na=0)}
function M(a,b){return new Promise(c=>{a.B.addEventListener("transitionend",()=>c(),{once:!0});a.B.style.opacity=b})}function P(a){return new Promise(b=>{const c=new Image;c.addEventListener("load",()=>b(c));c.addEventListener("error",()=>{throw Error("image load error "+a);});c.crossOrigin="Anonymous";c.src=a})}
function Q(a){if(a.image?.complete&&a.image.naturalWidth){var b=a.s,c=document.createElement("canvas"),d=c.getContext("2d",{alpha:!1});c.width=a.w;c.height=a.u;d.fillStyle="#000000";d.fillRect(0,0,a.w,a.u);var e=a.image.naturalWidth,f=a.image.naturalHeight,g=a.w/a.u;if(g>e/f){var h=e;var k=Math.round(e/g);e=0;f=Math.round((f-k)/2)}else k=f,h=Math.round(f*g),f=0,e=Math.round((e-h)/2);d.drawImage(a.image,e,f,h,k,0,0,a.w,a.u);a.tb.forEach(l=>{if(l.ub?.complete){const {x:y,y:z,w:n,u:A}=l.c();d.globalAlpha=
.55;d.shadowColor="#000000";d.shadowBlur=16;d.drawImage(l.ub,y,z,n,A)}});b.bindTexture(b.TEXTURE_2D,a.Ha);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c);d.clearRect(0,0,a.w,a.u);c.width=c.height=0;c=null}}function R(a){a.aa||(a.aa=!0,a.yb=a.Ra+1E3)}async function S(a){return await (new Response((new Response(Uint8Array.from(atob(a),b=>b.charCodeAt(0)))).body.pipeThrough(new DecompressionStream("gzip")))).text()}
function T(a){const b=a.s,c=b.createTexture();b.bindTexture(b.TEXTURE_2D,c);b.texImage2D(b.TEXTURE_2D,0,b.RGBA32F,a.w,a.u,0,b.RGBA,b.FLOAT,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);if(b.getError()!==b.NO_ERROR)throw Error("create water texture fail");return c}
function na(a){const b=a.s;[a.C,a.H].forEach(c=>{b.bindTexture(b.TEXTURE_2D,c);b.texImage2D(b.TEXTURE_2D,0,b.RGBA32F,a.w,a.u,0,b.RGBA,b.FLOAT,null)});[a.O,a.bb].forEach(c=>{b.bindFramebuffer(b.FRAMEBUFFER,c);if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw Error("incomplete resized framebuffer");});b.bindFramebuffer(b.FRAMEBUFFER,null)}function oa(a){O(a);a.A.$.classList.toggle("msk",!0);M(a,0).then(()=>{D(a.A);U(a);M(a,1);a.A.$.classList.toggle("msk",!1);R(a)})}
function U(a){N(a);a.Bb();a.Ya();a.Eb();a.Cb()}function pa(a){const b=a.s,c=a.Ga,d=a.j;b.uniform2f(c.mb,a.w,a.u);b.uniform1f(c.time,a.La);b.uniform1f(c.kb,a.i);Object.keys(d).filter(e=>c[e]&&d[e]instanceof Array).forEach(e=>b.uniform3fv(c[e],d[e]));Object.keys(d).filter(e=>c[e]&&"number"===typeof d[e]).forEach(e=>b.uniform1f(c[e],d[e]))}function H(a){a.Ea&&(a.Ea=!1,cancelAnimationFrame(a.rb),O(a),a.Pa.textContent="x"+a.i.toString()+" --",a.A.toggle("flow",!1))}
function V(a){a.rb=requestAnimationFrame(b=>{a.La+=a.Ia;var c=a.s,d=a.gb;c.useProgram(a.Fa);c.bindFramebuffer(c.FRAMEBUFFER,a.ba);c.bindBuffer(c.ARRAY_BUFFER,a.Ta);var e=c.getAttribLocation(a.Fa,"position");c.enableVertexAttribArray(e);c.vertexAttribPointer(e,2,c.FLOAT,!1,0,0);c.uniform2f(d.mb,a.w,a.u);c.uniform1f(d.kb,a.i);c.uniform1f(d.Wa,a.Wa);c.uniform1f(d.Ia,a.Ia);c.uniform1f(d.time,a.La);c.uniform1f(d.U,a.j.U);c.uniform1f(d.I,a.j.I);c.uniform1f(d.M,a.zb);e=Array.from(a.v.values());const f=Math.min(e.length,
10);a.Z.fill(0);const g=a.s,h=a.gb;for(let k=0;k<f;k++){const l=e[k];a.Z[2*k]=l.x;a.Z[2*k+1]=l.y;a.Z[2*(k+f)]=l.W;a.Z[2*(k+f)+1]=l.X;g.uniform2f(h.touches[k].position,l.x,l.y);g.uniform1f(h.touches[k].Rb,l.K);g.uniform1f(h.touches[k].I,l.Za);g.uniform1f(h.touches[k].Vb,l.J);g.uniform1f(h.touches[k].$b,l.T);g.uniform1f(h.touches[k].Ub,l.S);g.uniform1f(h.touches[k].angle,l.Fb)}g.uniform2fv(h.Z,a.Z);g.uniform1i(h.Zb,f);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,a.P);c.uniform1i(d.lb,0);c.drawArrays(c.TRIANGLE_STRIP,
0,4);[a.ba,a.ca,a.P]=[a.ba===a.O?a.bb:a.O,a.ca===a.C?a.H:a.C,a.P===a.C?a.H:a.C];c=a.s;c.useProgram(a.Sa);c.bindFramebuffer(c.FRAMEBUFFER,null);c.clearColor(0,0,0,1);c.clear(c.COLOR_BUFFER_BIT);c.bindBuffer(c.ARRAY_BUFFER,a.Ta);d=c.getAttribLocation(a.Sa,"position");c.enableVertexAttribArray(d);c.vertexAttribPointer(d,2,c.FLOAT,!1,0,0);pa(a);c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,a.ca);c.uniform1i(a.Ga.dc,0);c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,a.Ha);c.uniform1i(a.Ga.Ha,
1);c.activeTexture(c.TEXTURE2);c.bindTexture(c.TEXTURE_2D,a.P);c.uniform1i(a.Ga.lb,2);c.drawArrays(c.TRIANGLE_STRIP,0,4);qa(a,b);V(a)})}function qa(a,b){var c=b-a.Ra;a.Ra=b;!a.aa||b<a.yb||(a.Oa[a.ab]=c,a.ab=(a.ab+1)%a.Oa.length,c=a.Oa.reduce((d,e)=>d+e)/a.Oa.length,c=Math.round(1E3/c),c!==a.Na&&(a.Pa.textContent="x"+a.i.toString()+" "+c.toString().padStart(2,"0")),a.Na=c,1E3<=b-a.xb&&(a.xb=b,a.V++,3<=a.V&&(a.V=0,55>a.Na?ra(a):a.i<a.qb&&a.i<a.N&&a.i!=a.N&&J(a,a.i+.5))))}
function ra(a){1!=a.i&&(a.qb=a.i-.5,J(a,a.i-.5))}function J(a,b){b=Math.max(Math.min(a.N,b),1);b!=a.i&&(O(a),G(a,(b>a.i?"up":"down")+"scale"),a.V=0,a.i=b,U(a),R(a))}function W(a){a.isActive?a.hb():H(a)}function X(a,b){const c=b.clientX;b=b.clientY;return{x:c*a.i,y:a.u-b*a.i,rx:c,ry:b}}function Y(a){return{K:a.j.K,Za:a.j.Za,J:a.j.J,T:a.j.T,S:a.j.S,Fb:a.j.Fb}}
function Z(a){if(a.A.pop){const b=Array.from(a.v.values()).some(c=>{var d=c.rx;c=c.ry;var e=a.A.pb;return d>=e.x&&d<=e.x+e.w&&c>=e.y&&c<=e.y+e.u});b!==a.eb&&(a.eb=b,clearTimeout(a.vb),a.vb=setTimeout(()=>{a.A.$.classList.toggle("msk",a.eb)},100))}}
function ka(a,b,c,d,e,f){const g=Math.random().toString(36).slice(-6),h=performance.now(),k=b+Math.cos(e)*d,l=c+Math.sin(e)*d,y={x:k,y:l,W:k,X:l,...Y(a),speed:2.5};a.v.set(g,y);const z=()=>{var n=performance.now()-h;if(1>n/3333){const A=e+.001*n*y.speed;n=f(n,0,1,3333);n=d*(1-n);if(a.v.has(g)){const q=a.v.get(g);q.W=q.x;q.X=q.y;q.x=b+Math.cos(A)*n;q.y=c+Math.sin(A)*n;requestAnimationFrame(z)}}else a.v.delete(g)};requestAnimationFrame(z)}
function K(a){if(a.Qa){var b=performance.now();256<b-a.$a&&4>a.Ma.size&&8>a.v.size&&(sa(a),a.$a=b);requestAnimationFrame(()=>K(a))}}function sa(a){const b=Math.random()*a.w,c=Math.random()*a.u,d="rain_"+Math.random().toString(36).slice(-6);a.v.set(d+"_impact",{x:b,y:c,W:b,X:c,...Y(a),K:.02,Za:.35,J:.12});setTimeout(()=>{a.v.set(d+"_splash",{x:b,y:c,W:b,X:c,...Y(a),K:.06,Za:.35,J:.12})},64);a.Ma.add(d);setTimeout(()=>{a.v.delete(d+"_impact");a.v.delete(d+"_splash");a.Ma.delete(d)},72)}
function ja(a){if(!a.L){a.L=!0;var b=0,c={x:a.w/2,y:a.u/2,W:a.w/2,X:a.u/2,speed:.01,scale:.5,...Y(a)};a.v.set("auto",c);var d=()=>{a.L?(b+=c.speed,c.W=c.x,c.X=c.y,c.x=a.w*(.5+c.scale*Math.sin(b)),c.y=a.u*(.5+c.scale*Math.cos(1.5*b)),window.requestAnimationFrame(d)):a.v.delete("auto")};d();a.A.toggle("point")}}
class la{constructor(){this.N=2;this.sb=1E3/60;this.i=this.N;this.aa=!1;this.V=0;this.qb=this.N;this.Qb=1/this.sb;this.Wa=this.jb=this.ib=0;N(this);this.j={G:"assets/img.webp",U:.997,I:.996,M:10,ua:.8,Ca:.619,Ka:[0,.286,1],Aa:.1,wa:.7,va:.16,la:1.2,ma:2.6,nb:39,ta:1,ra:.2,sa:.5,Y:.583,Ja:[0,.502,1],ja:2,da:.2,ka:.7,K:.027,J:.36,T:.25,S:.3,ia:.15,ga:1.4,ha:.02,ea:.42,fa:2.5,Xa:[.624,.332,.707],xa:28,ya:63,Va:[.659,-.534,.53],na:175,oa:60,za:6,Xb:.52,pa:1.2,Pb:.52,Da:.6,qa:.3,Ba:.15};this.G=this.j.G;
this.A=this.vb=this.Ab=this.image=this.B=this.s=this.Ta=this.Fa=this.gb=this.Sa=this.Ga=this.ca=this.P=this.Ha=this.C=this.H=this.ba=this.O=this.bb=null;this.rb=-1;this.eb=!1;this.Ob=new Float32Array([-1,-1,1,-1,-1,1,1,1]);this.Z=new Float32Array(20);this.zb=this.j.M;this.Na=0;this.Oa=Array(30).fill(16.67);this.yb=this.xb=this.Ra=this.ab=0;this.Ea=!1;this.fb=this.isVisible=!0;this.Qa=this.L=this.wb=!1;this.$a=0;this.Ma=null;this.v=new Map;this.Ia=1;this.La=0;this.tb=[];this.Pa=null;this.B=document.createElement("canvas");
this.B.style.opacity="0";document.body.appendChild(this.B)}async load(a){const b=a.G&&a.G!=this.G;O(this);G(this,"loading");b&&(await M(this,0),this.G=a.G,this.image=await P(this.G),Q(this));I(this);this.j={...this.j,...a};this.Ya();b&&await M(this,1);R(this)}async Kb(){this.image=await P(this.G)}async Lb(){this.tb.push({ub:await P("assets/github-mark-white.png"),c:()=>({x:this.w-42*this.i,y:6*this.i,w:36*this.i,u:36*this.i})})}Jb(){this.s=this.B.getContext("webgl2",{alpha:!1,antialias:!1,depth:!1,
stencil:!1,powerPreference:"high-performance",preserveDrawingBuffer:!1});if(!this.s)throw Error("webgl2 not supported");if(!this.s.getExtension("EXT_color_buffer_float"))throw Error("ext_color_buffer_float not supported");this.s.getExtension("OES_texture_float_linear");const a=this.s.getError();if(a!==this.s.NO_ERROR)throw Error("webgl init error "+a);}async Gb(){const a=await S("H4sIAAAAAAAAClMuSy0qzszPUzA2MFBILebKzFMoS002UijIL84syczPs84vLYGIlKRWOOfnF6VYl+VnpijkJmbmaWhWwwRtYeq19Ey19Uyt03PiA6AitmWpySYaMHkdAx1DTetaAIBqaOZ3AAAA"),
b=await S("H4sIAAAAAAAACoVUTW+bQBC991cgVYpYvMZgJ20qQg6Ne+vBiqP2EPmwgjGMBCzaD5c04r9XuyyE2JVyY2dn3rw385bPJxASeeNtosgD+akVkKENlFiUrXesOFPJeVSyuq1ArLeJbvDIRe2dIFt7+hEkr7RC3kwXFsDTW6gUe8IaqN6ibCv2ss9YBVTv8S98ZxKo/s1OsG8Bcqq3rG6xKajeCd6yghlEezXBTgw8vRNwQq7lXjEFZ4SeuM7K5zg6THFslAs/cN2oRCqhM+XZyKstarlEK2GgLliOWrqDVAKaQpXuqATDarxqBbA86adOFtL12jHBammJYDNwU9A9cC7yhGtlItfeUbDigVdcJCeOuVczbHzyaq+k0ZYq6JQW4L+XTEck4piUgEWpUlsTdskgCjuoUvPpx2Q1X5Rjr+s0CpMjF76ZEKZRgne3CS4W5HXIYE1RQWq/fSRB+PX2ZvPtNv6ySaSuFx9xW9jWGZe+xSFUYuM+SWDJBRfLJmGX9IZYjZ0/iKJS10EYr2+CdbgcBL7MnEOC0TpO1p+SKeOwtGadP1MddnR+eiFnyucOmc0gR6nSyjrAH5UFM6ClMxweyMr/qOVq8j6h0jyG/NFaLX1nGTyEzoF49E3/u3nuSAzrlmXqonK0ayBrzlUpFbT+vJxGITWYJAhvDP55vfX3fRReXeF9RNzzEHDa8ZHlMy7jA635CX5BNsUOS5fl1mDuf0Izjs6lk9W4HtPb5dzHsLx2rUxoiyJ1+auzcqr4jmOj0v+u4j0DVvGmeDJy0pwr31VS14EYAm8pd1E4DtZO4MfxCJlKoWv95bj9AWD5VhSMWJOq1cU8h3/EIoyimJBkWNriYmu2ZzDrHLjZBOEm6fvevrehOOn76a9hXve1L3VN3VuJaEyS/h+jh5Pl4gUAAA=="),
c=await S("H4sIAAAAAAAACp1XS4/bNhC+91cY6IWkaNqSs2gWKgs0cYIEaIIgTrJnVqJtbmRRpUivnMX+94IPPb3ebnqxzCHnyZlvhr8euaqFLGer5XLG618qxTPhCHux21ezbSGZTqfUmh2qgqtknZpSbKU6zI48S2bmM69lYbSQZbfhBMzMF3Hg2KxFXRXstMlYwbsTnbCZuWGaq3dc7PYam1cs+75T0pT5F95oozg2nxQ/CmnqjWaaD3WvZmZjyrVQPLPasfnLyujWU2s2pnxfal7WQp/C2W49EetM+iJKfe5RqTda8XKn99hsKp6Zgqme8lma3b7kdY3NW8Xrkhdvtlue6W75Sd5x1XOG5We+LbzR4diQtBa1lmrkUXD+++m1LKSaGrnmld6/ZZmWCps/9UHW1Z4rkW0yprVV96Y8fmDVIBivmam1yHo/WoK9s35VcZ53q1fKRtD7GkhrrpkosLlhR97b30v9IJSS6rGdb7yQmdCnQSCC/T3lVWH8WjF/v6L0Gah581pKlafSaEt5MdsqtvOhcZHacf1RqgMrgM/YI3bfSjS8gPeOI2eaUe1TDoxT8ghTH9jSyWiNpjGJ2N81AJaVNHP3OUE0yneIEpIqro0qA7v4wa0VKwDAo+qygh0qYI5zayJwJpIGJQQvIV4SHBMISTN/kjV6itVaFD1b9f/ROVQGFyuCxnEbBwg/KwxL7L05oYT8pEkXWJ8RhlEY8TyI+Un185b/nP0ZwYkhTB9cCnu8tCWgeN7XRJfQPkMVy4Wpp9m9mmW2FqhLu2WbzVpqVtw4m+mSpFupgCj1TNB5korfaZKKKIIt9dZSby31NorgvZeQi1rT+h+lgVsDgUR0i24hTN0Obyowt/+Q/Vm8JHABEoJYJmswj4m9AXsnqbPW+/f1SMfhC4Kh9w/cQoi8j8i5F4KZttzkRGMy71epczzqC/u8vbSHIWlOP5yl6SAyEXWUh1DCTtxisJ8++FDsuB5fyiqUO3b/i9CY/Ooo+J1deNZjgL42qh9zqd/RA2tALjUIUnrsaEVFQQq0GQUxK6o9o33/Qf3f1O0h6j7h8nNeygN1qpD/BW7b3ksUd5B1EI2nL0B/bY7X/0J0GdMreQec6Em3gwgE5Ow8Ry8JRJe6Rn2QUu9rzSvgbhuPWS+2DgjRWYNOH45S5LMDEyVwpRHKhLpki+FiOMwM74pOwHuJl644Xe/Yu1RYX+wgbX9qK8+fpz0baXDrUKDOB5undJBPtO9lrVgPLa3wvJsWfBjo0/GDabDm7JgvRL+LRjNFQLCgsPZTBR2ff2Ts8Gw487OCxRyxBdPR448l6eDFTRMOCOl4wkDxkuDabuR2xKRu0ESjMcXhmZcjaEwcohEHafed2QWnAo1GHY9FwcL66zfaxhi545G/A9Kc0OPzmRfaW4YEIlde6B1TlU+zWpSgV+EaU+RYIJ5sNd0WiskKwrTfi6gViEjc6pxyDqIXpKMzxWdnnJpWS+QdseW6EDB9aC8ufBG5ishVaE9bUbLCTVzUYsalbuVzpA3qIJxgMNdF0xRGZNW2zek86LDk7HxCIos+MZlPYLTFTAeZCYEw1A7uJ348mvERCOkdkST0taeL6xl6R08BiMYPBZgOQtn/jRzqxJhc/4bJdQLRuOGcdYnRwwi2+vEANoevIS/dy77G8X9LHz+0HpU/fl9FNiu6Bwv23kA8jSdE07cJOrvc88fSJRwZhI+O4gdRm8NTNnT+ukFgcMkxsYkYQC4hrpfNQ4ogcmVBsX16WJUvQsb3lrR5HMP04V/CgG7Fhw8AAA==");
this.Fa=this.createProgram(a,b);this.Sa=this.createProgram(a,c)}hc(){this.Ta=this.s.createBuffer();this.s.bindBuffer(this.s.ARRAY_BUFFER,this.Ta);this.s.bufferData(this.s.ARRAY_BUFFER,this.Ob,this.s.STATIC_DRAW)}Bb(){const a=Math.round(this.ib*this.i);this.B.width=Math.round(this.jb*this.i);this.B.height=a}Eb(){this.s.viewport(0,0,this.w,this.u)}Ya(){this.zb=Math.round(this.j.M*this.i/2)}Hb(){const a=this.s;this.C=T(this);this.H=T(this);const b=this.s,c=b.createTexture();b.bindTexture(b.TEXTURE_2D,
c);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,this.w,this.u,0,b.RGBA,b.UNSIGNED_BYTE,null);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.LINEAR);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_S,b.CLAMP_TO_EDGE);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_WRAP_T,b.CLAMP_TO_EDGE);this.Ha=c;this.O=this.createFramebuffer(this.C);this.bb=this.createFramebuffer(this.H);this.ba=this.O;this.ca=this.C;this.P=this.H;a.bindFramebuffer(a.FRAMEBUFFER,null);a.bindTexture(a.TEXTURE_2D,
null)}createFramebuffer(a){const b=this.s,c=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,c);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,a,0);a=b.checkFramebufferStatus(b.FRAMEBUFFER);if(a!==b.FRAMEBUFFER_COMPLETE)throw Error(`incomplete framebuffer ${a}`);return c}Cb(){na(this);Q(this)}fc(){clearTimeout(this.Ab);this.Ab=setTimeout(()=>oa(this),128)}Ib(){const a=(b,c)=>Object.keys(c).reduce((d,e)=>({...d,[e]:this.s.getUniformLocation(b,`u${c[e]}`)}),{});this.gb={...a(this.Fa,
{mb:"Resolution",kb:"DisplayScale",Wa:"SizeBase",Ia:"DeltaTime",time:"Time",U:"WaveSpeed",I:"Damping",M:"PropagationSpeed",lb:"PreviousState",Z:"Touch",Zb:"TouchCount"}),touches:Array(10).fill({}).map((b,c)=>{b=`TouchParams[${c}].`;return a(this.Fa,{position:`${b}position`,Rb:`${b}radius`,I:`${b}damping`,Vb:`${b}strength`,$b:`${b}trail`,Ub:`${b}spread`,angle:`${b}angle`})})};this.Ga=a(this.Sa,{mb:"Resolution",time:"Time",kb:"DisplayScale",lb:"PreviousState",dc:"WaterHeight",Ha:"BackgroundTexture",
Xa:"SunDirection",Va:"LightDirection",za:"SunIntensity",pa:"LightIntensity",nc:"SunColor",lc:"LightColor",ua:"Refraction",Ka:"WaterTint",Aa:"TintStrength",wa:"SpecularStrength",va:"Roughness",la:"FresnelEffect",ma:"FresnelPower",nb:"SpecularPower",Ja:"SkyColor",ja:"DepthFactor",da:"AtmosphericScatter",ka:"EnvMapIntensity",ta:"ReflectionFresnel",ra:"ReflectionBlur",sa:"ReflectionDistortion",ia:"CausticStrength",ga:"CausticScale",ha:"CausticSpeed",ea:"CausticBrightness",fa:"CausticDetail",Da:"WaveReflectionStrength",
qa:"MirrorReflectionStrength",Ba:"VelocityReflectionFactor"})}createProgram(a,b){const c=this.s,d=c.createProgram(),e=(h,k)=>{h=c.createShader(h);c.shaderSource(h,k);c.compileShader(h);if(!c.getShaderParameter(h,c.COMPILE_STATUS))throw k=c.getShaderInfoLog(h),c.deleteShader(h),Error(`compile shader fail ${k}`);return h};let f,g;try{if(f=e(c.VERTEX_SHADER,a),g=e(c.FRAGMENT_SHADER,b),c.attachShader(d,f),c.attachShader(d,g),c.linkProgram(d),!c.getProgramParameter(d,c.LINK_STATUS))throw Error(`link program fail ${c.getProgramInfoLog(d)}`);
}catch(h){throw h;}finally{f&&c.deleteShader(f),g&&c.deleteShader(g)}return d}hb(){this.Ea||(G(this,"liquify"),this.Ea=!0,this.A.toggle("flow"),this.Ra=performance.now(),R(this),V(this))}Yb(){this.fb=!1;W(this)}ac(){this.fb=!0;W(this)}bc(){}Mb(){document.addEventListener("visibilitychange",()=>{this.isVisible="visible"===document.visibilityState;W(this)});Object.entries({blur:this.Yb,focus:this.ac,resize:this.fc,hashchange:this.bc}).forEach(([a,b])=>window.addEventListener(a,b.bind(this)));Object.entries({touchstart:this.Tb,
pointerdown:this.ec,pointermove:this.cc,pointerup:this.cb,pointerout:this.cb,pointercancel:this.cb}).forEach(([a,b])=>this.B.addEventListener(a,b.bind(this)))}Tb(a){a.preventDefault()}ec(a){const b=a.pointerId;this.wb||(this.wb=!0);this.B.setPointerCapture(b);a=X(this,a);this.v.set(b,{x:a.x,y:a.y,W:a.x,X:a.y,...Y(this)})}cc(a){var b=a.pointerId;this.v.has(b)&&(b=this.v.get(b),a=X(this,a),b.W=b.x,b.X=b.y,b.x=a.x,b.y=a.y,b.rx=a.rx,b.ry=a.ry,Z(this))}cb(a){a=a.pointerId;this.v.has(a)&&(this.B.releasePointerCapture(a),
this.v.delete(a),Z(this))}get w(){return this.B.width}get u(){return this.B.height}get isActive(){return this.isVisible&&this.fb}Nb(a,b,c,d){return-c*Math.cos(a/d*(Math.PI/2))+c+b}};}).call(this);
